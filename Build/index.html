<!DOCTYPE  html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Stardust Script</title>

	<link href="css/pepper-grinder/jquery-ui-1.10.4.custom.css" rel="stylesheet">
	<script src="src/jquery-1.10.2.js"></script>
	<script src="src/jquery-ui-1.10.4.custom.js"></script>

	<script src="src/createjs-2013.12.12.min.js"></script>
	<script src="src/RPG/global_function.js"></script>
	<script src="src/RPG/sprite_choose.js"></script>
	<script src="src/RPG/map.js"></script>
	<script src="src/RPG/npc.js"></script>
	<script src="src/RPG/character.js"></script>
	<script src="src/RPG/monster.js"></script>
	<script src="src/RPG/framework.js"></script>

	<script>
		var stage ;
		function init() {
			stage = new createjs.Stage( "myCanvas" ) ;
    		document.body.style.cursor = "url('pic/cursor/normal_select.cur'), default" ;
			// 定義畫布長寬
			var canvas_len = 900, canvas_hei = 550 ;
			// 建立地圖框架
			var mapcontrol = new Main_Map( "01", canvas_len, canvas_hei, true ) ;
			// 建立遊戲框架
			var framework = new Main_Framework( canvas_len, canvas_hei ) ;
			// 建立角色物件
			var baphomet = new Character( mapcontrol, "baphomet", 175, 55, 1.00, 9, 3, "front" ) ;
			var farmiliar_01 = new NPC( mapcontrol, "farmiliar_01", 19, 1, 6, "monster", "farmiliar" ) ;
			var farmiliar_01 = new NPC( mapcontrol, "farmiliar_01", 19, 1, 6, "monster", "farmiliar" ) ;
			var farmiliar_02 = new NPC( mapcontrol, "farmiliar_02", 19, 1, 6, "monster", "farmiliar" ) ;
			var farmiliar_03 = new NPC( mapcontrol, "farmiliar_03", 19, 1, 6, "monster", "farmiliar" ) ;

			baphomet.OnLifeModify( -100, -40 ) ;
			createjs.Tween.get( baphomet.container, { loop: false } )
								.wait( 1000 ).call( function() { baphomet.OnTalk( "哈囉 ^^" ) ; } )
								.wait( 1000 ).call( function() { baphomet.OnWalk( 4, 4 ) ; } )
								.wait( 1500 ).call( function() { baphomet.OnWalk( 5, 4 ) ; } )
								.wait( 1000 ).call( function() { baphomet.OnTalk( "這裡簡單的介紹了我求學期間寫過的程式," ) ; } )
								.wait(    0 ).call( function() { farmiliar_01.OnWalk( 9, 3 ) ; } )
								.wait(  500 ).call( function() { farmiliar_02.OnWalk( 11, 3 ) ; } )
								.wait(  500 ).call( function() { farmiliar_03.OnWalk( 13, 3 ) ; } )
								.wait( 2500 ).call( function() { baphomet.OnTalk( "以及我的在校成績。" ) ; } )
								.wait( 3500 ).call( function() { farmiliar_01.OnTalk( "我負責告訴你成績, 吱吱。" ) ; } )
								.wait(    0 ).call( function() { farmiliar_01.OnWalk( 12, 6 ) ; } )
								.wait( 3500 ).call( function() { farmiliar_02.OnTalk( "吱, 我來介紹程式、專題。" ) ; } )
								.wait(    0 ).call( function() { farmiliar_02.OnWalk( 14, 4 ) ; } )
								.wait( 3500 ).call( function() { farmiliar_03.OnTalk( "吱吱... 我沒事情做..." ) ; } )
								.wait(    0 ).call( function() { farmiliar_03.OnWalk( 16, 2 ) ; } )
								.wait( 1000 ).call( function() { baphomet.OnTalk( "走到該蝙蝠附近, 就可以觀看囉。（移動滑鼠）" ) ; } )

								;

			// 地圖背景匯入
			stage.addChild( mapcontrol.backgorond ) ;
			// 地圖景效物件匯入(後端)
			stage.addChild( mapcontrol.container_back ) ;
			// 主要角色匯入
			stage.addChild( baphomet.container ) ;
			stage.addChild( farmiliar_01.container, farmiliar_02.container, farmiliar_03.container ) ;
			// 地圖景效物件匯入(前端)
			stage.addChild( mapcontrol.container_front ) ;
			// 遊戲主框架匯入
		    stage.addChild( framework.container ) ;

		    // jQuery Setting.
		    $( '#dialog_01, #dialog_02, #dialog_03' ).dialog({
				autoOpen: false,
				height: 180,
				modal: true,
				text: "翻天",
				show: {
					effect: "blind",
					duration: 1000
				},
				hide: {
					effect: "blind",
					duration: 500
				},
				buttons: {
					"我要觀看": function() {
						createjs.Tween.get( baphomet.container, { loop: false } )
											.wait( 1000 ).call( function() { farmiliar_01.OnTalk( "吱吱, 我知道了, 等我一下。" ) ; } ) ;
						$( this ).dialog( "close" ) ;
					},
					"取消": function() {
						$( this ).dialog( "close" ) ;
					}
				}
			}) ;

		} // init()
	</script>

	<style>
		body {
			background-color: #ACA
		}
		#myCanvas {
			 position: absolute ;
			 top: 50% ;
			 left: 50% ;
			 margin-left: -450px ;
			 margin-top: -285px ;
			 border-radius: 10px ;
		}
	</style>
</head>

<body onload="init()">
	<canvas id="myCanvas" width="900" height="550">
		Alternative Content
	</canvas>

	<div id="dialog_01" title="吸血蝙蝠小弟" number=1>
		<p>你要觀看鮭魚的在學成績記錄嗎？</p>
	</div>

	<div id="dialog_02" title="吸血蝙蝠二哥">
		<p>你要觀看鮭魚的程式、專題記錄嗎？</p>
	</div>

	<div id="dialog_03" title="吸血蝙蝠大哥">
		<p>吱吱</p>
	</div>
</body>
</html>